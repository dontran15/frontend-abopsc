<div id="signup" style="display:none" class="userAuth">
    <h1>Sign Up</h1>
    <table>
        <tr>
            <th>Name</th>
            <th><input type="text" id="name" name="name" placeholder="enter your name..."></th>
        </tr>
        <tr>
            <th>Email</th>
            <th><input type="text" id="email" name="email" placeholder="enter your email..."></th>
        </tr>
        <tr>
            <th>Password</th>
            <th><input type="password" id="pswd" name="pswd" placeholder="enter a password..."></th>
        </tr>
        <tr>
            <th>Confirm Password</th>
            <th><input type="password" id="pswdagain" name="pswdagain" placeholder="re-enter password..."></th>
        </tr>
        <tr>
            <th>Date of Birth</th>
            <input type="text" placeholder="00-00-0000" id="dob" name="enter date of birth..." required>
        <tr>
            <th><button class="btn" type="submit" value="Submit" onclick="checkFields()">Submit</button></th>
        </tr>
        <tr>
            <th> Or <a onclick="loginPage()">login</a> instead.</th>
        </tr>
    </table>
</div>

<script>
    // show login, hide signup
    function loginPage() {
        document.getElementById("signup").style.display = "none";
        document.getElementById("login").style.display = "";
    }

    // Replace with domain and api call of backend
    url = ""

    function checkFields() {
        if(document.getElementById("password").value == document.getElementById("passwordagain").value) {
            alert("they match");
        }
    }

    function signUp(){
        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;
        const password = document.getElementById('pswd').value;
        const dob = document.getElementById('dob').value;

        const url = "https://abopsc-backend.dontntntnt.de/api/person/post/";

        var details = {
            'email': email,
            'password': password,
            'name': name,
            'dob': dob
        };

        var formBody = [];
        for (var property in details) {
            var encodedKey = encodeURIComponent(property);
            var encodedValue = encodeURIComponent(details[property]);
            formBody.push(encodedKey + "=" + encodedValue);
        }
        formBody = formBody.join("&");
        
        const options = {
            method: 'POST', 
            mode: 'cors', // no-cors, *cors, same-origin
            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached
            credentials: 'include', // include, *same-origin, omit
            headers: {
            // 'Content-Type': 'application/json'
            'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'
            },
            body: formBody
        };

        fetch(url, options)
            .then(response => console.log(response.text()))
            .then(result => console.log(result))
            .catch(error => console.log('error', error));
        
        }
</script>
